!function(t){"use strict";t.module("moviecat",["ngRoute","moviecat.movie_detail","moviecat.movie_list","moviecat.directives.auto_active"]).config(["$routeProvider",function(t){t.otherwise({redirectTo:"/in_theaters"})}]).controller("SearchController",["$scope","$route",function(t,e){t.input="",t.search=function(){e.updateParams({category:"search",q:t.input})}}])}(angular),function(t){"use strict";t.module("moviecat.movie_list",["ngRoute","moviecat.services.http"]).config(["$routeProvider",function(t){t.when("/:category/:page?",{templateUrl:"movie_list/view.html",controller:"MovieListController"})}]).controller("MovieListController",["$scope","$route","$routeParams","HttpService",function(t,e,o,i){console.log(o);var a=5;t.page=parseInt(o.page||1);var n=5*(t.page-1);t.title="Loading...",t.movies=[],t.loading=!0,t.totalCount=0,t.totalPage=0,i.jsonp("http://api.douban.com/v2/movie/"+o.category,{start:n,count:a,q:o.q},function(e){t.loading=!1,t.title=e.title,t.movies=e.subjects,t.totalCount=e.total,t.totalPage=Math.ceil(e.total/a),t.$apply()}),t.go=function(o){o>0&&o<t.totalPage+1&&e.updateParams({page:o})}}])}(angular),function(t){"use strict";t.module("moviecat.movie_detail",["ngRoute","moviecat.services.http"]).config(["$routeProvider",function(t){t.when("/detail/:id",{templateUrl:"movie_detail/view.html",controller:"MovieDetailController"})}]).controller("MovieDetailController",["$scope","$route","$routeParams","HttpService",function(t,e,o,i){t.movie={},t.loading=!0,t.title="Loading...",i.jsonp("http://api.douban.com/v2/movie/subject/"+o.id,{},function(e){t.movie=e,t.loading=!1,t.title=e.title,t.$apply()})}])}(angular),function(t){"use strict";t.module("moviecat.services.http",[]).service("HttpService",["$window",function(t){this.jsonp=function(e,o,i){var a="jsonp_"+(Math.random()*Math.random()).toString().substr(2);t[a]=function(e){i(e),t.document.body.removeChild(c)};var n="";for(var r in o)n+=r+"="+o[r]+"&";n+="callback="+a,e=e+"?"+n;var c=t.document.createElement("script");c.src=e,t.document.body.appendChild(c)}}])}(angular),function(t){t.module("moviecat.directives.auto_active",[]).directive("autoActive",["$location",function(t){return{link:function(e,o,i){e.$location=t,e.$watch("$location.url()",function(t,e){var a=o.children().attr("href").substr(1);t.startsWith(a)&&(o.parent().children().removeClass(i.autoActive),o.addClass(i.autoActive))})}}}])}(angular);